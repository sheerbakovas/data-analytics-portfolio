# Adzuna Telegram Bot Daily Report

Проект по сбору данных с Adzuna API и автоматизации ежедневной отчётности в Telegram.

Бот ежедневно собирает статистику по вакансиям для набора ролей (Data Analyst, Product Analyst, BI Analyst, Data Engineer, ML Engineer), формирует текстовый отчёт и отправляет его в чат. Дополнительно генерируется Excel-файл с детализацией и summary-листом, который также прикрепляется к сообщению.

---

## Что происходит в проекте

При запуске скрипта:

- загружаются переменные окружения из `.env`,
- выполняется запрос к **Adzuna Jobs API** по каждой роли из списка `ROLES`,
- из выдачи берутся первые 50 результатов (sample) и общее число вакансий (total),
- извлекаются зарплаты (min/max) и рассчитывается средняя зарплата по вакансиям, где зарплата указана,
- извлекаются локации и компании, формируются топ-3 по частоте,
- собирается текстовый отчёт и отправляется в Telegram,
- параллельно формируется Excel-отчёт:
  - лист `Summary` (дата, страна, валюта, количество ролей),
  - лист `ByRole` (метрики по каждой роли, топ-локации и топ-компании),
- Excel-файл прикрепляется к сообщению в Telegram.

Далее скрипт остаётся запущенным и работает по расписанию: **каждый день в 09:00 (Europe/Moscow)** отчёт отправляется автоматически.

---

## Что входит в отчёт

Для каждой роли рассчитываются и отправляются:

- общее количество вакансий по запросу (**total**),
- размер выборки (количество вакансий в ответе API, **sample**),
- средняя зарплата по вакансиям, где зарплата указана (**avg salary**),
- доля вакансий с указанной зарплатой (**salary share, %**),
- топ-3 локации по частоте (**top locations**),
- топ-3 компании по частоте (**top companies**).

---

## Используемые технологии

- **Python**
- **Requests** — запросы к Adzuna API
- **Pandas** — обработка данных и подготовка таблиц
- **OpenPyXL** — выгрузка отчёта в `.xlsx`
- **python-telegram-bot (telegram.Bot)** — отправка сообщений и файлов в Telegram
- **APScheduler** — планировщик задач (ежедневный запуск)
- **python-dotenv** — работа с переменными окружения
- **pytz** — таймзона для расписания

---

## Как запустить

1. Установить зависимости из `requirements.txt`

2. Создать файл `.env` в корне проекта и заполнить переменные:

```env
BOT_TOKEN=...
CHAT_ID=...

ADZUNA_APP_ID=...
ADZUNA_APP_KEY=...
ADZUNA_COUNTRY=gb
```

Где:

- `BOT_TOKEN` — токен Telegram-бота  
- `CHAT_ID` — id чата или канала, куда отправлять отчёты  
- `ADZUNA_APP_ID`, `ADZUNA_APP_KEY` — ключи Adzuna API  
- `ADZUNA_COUNTRY` — код страны (например: `gb`, `us`, `de`, `fr`)  

3. Запустить скрипт